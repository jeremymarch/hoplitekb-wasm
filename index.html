<html>
<head>
<meta charset="UTF-8">
<script>
//https://stackoverflow.com/questions/3923089/can-i-conditionally-change-the-character-entered-into-an-input-on-keypress/3923320#3923320

function transformTypedChar(origChars, key) {

	var charsToReplace = 0;
	var mappedChar = "";
    if (origChars.length > 0 && origChars == "a" && key == "1") {
    	mappedChar = "รก"
    	charsToReplace = 1;
    }
    else if (origChars.length > 0 && origChars == "รก" && key == "1") {
    	mappedChar = "a"
    	charsToReplace = 1;
    }
    return [charsToReplace, mappedChar];
}

function accentSyllable(evt) {
    var val = this.value;
    evt = evt || window.event;

    // Ensure we only handle printable keys, excluding enter and space
    var charCode = typeof evt.which == "number" ? evt.which : evt.keyCode;
    //console.log(charCode);
    if (charCode && charCode > 47 && charCode < 58) { //0-9 are 48-57
        var key = String.fromCharCode(charCode);

        var start, end;
        if (typeof this.selectionStart == "number" && typeof this.selectionEnd == "number") {
        	//console.log("1111");
            // Non-IE browsers and IE 9
            start = this.selectionStart;
            end = this.selectionEnd;

            // Transform typed character
	        var ret = transformTypedChar(val.slice(start - 1, start), key);
	        var mappedChar = ret[1];
	        var charsToReplace = ret[0];
 
            if (charsToReplace > 0 && mappedChar != "")
            {
	            this.value = val.slice(0, start - charsToReplace) + mappedChar + val.slice(end);
	            // Move the caret
	            this.selectionStart = this.selectionEnd = start + 1 - charsToReplace;
        	}

        } else if (document.selection && document.selection.createRange) {
        	//console.log("2222");
            // For IE up to version 8
            var selectionRange = document.selection.createRange();
            var textInputRange = this.createTextRange();
            var precedingRange = this.createTextRange();
            var bookmark = selectionRange.getBookmark();
            textInputRange.moveToBookmark(bookmark);
            precedingRange.setEndPoint("EndToStart", textInputRange);
            start = precedingRange.text.length;
            end = start + selectionRange.text.length;

            // Transform typed character
	        var ret = transformTypedChar(val.slice(start - 1, start), key);
	        var mappedChar = ret[1];
	        var charsToReplace = ret[0];

            if (charsToReplace > 0 && mappedChar != "")
            {
	            this.value = val.slice(0, start) + mappedChar + val.slice(end);
	            start++;

	            // Move the caret
	            textInputRange = this.createTextRange();
	            textInputRange.collapse(true);
	            textInputRange.move("character", start - (this.value.slice(0, start).split("\r\n").length - 1));
	            textInputRange.select();
	        }
        }
        return false;
    }
    return true;
}

function start()
{
	document.getElementById("abc").onkeypress = accentSyllable;
	document.getElementById("def").onkeypress = accentSyllable;
}

</script>
</head>
<body onload="start()">
	<input type="text" id="abc"/><br>
	<input type="text" id="def"/>
</body>
</html>
